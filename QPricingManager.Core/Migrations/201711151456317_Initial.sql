CREATE TABLE [dbo].[PricingGroup] (
    [Id] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [Description] [nvarchar](max),
    [OrderInPricing] [int],
    [PricingId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.PricingGroup] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_PricingId] ON [dbo].[PricingGroup]([PricingId])
CREATE TABLE [dbo].[Pricing] (
    [Id] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [Description] [nvarchar](max),
    CONSTRAINT [PK_dbo.Pricing] PRIMARY KEY ([Id])
)
CREATE TABLE [dbo].[PricingTier] (
    [Id] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [Description] [nvarchar](max),
    [Price] [int] NOT NULL,
    [OrderInPricing] [int] NOT NULL,
    [PricingId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.PricingTier] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_PricingId] ON [dbo].[PricingTier]([PricingId])
CREATE TABLE [dbo].[PricingUnit] (
    [Id] [int] NOT NULL IDENTITY,
    [Price] [float],
    [Multiplier] [float],
    [IsIncluded] [bit] NOT NULL,
    [Text] [nvarchar](max),
    [PricingItemId] [int] NOT NULL,
    [PricingTierId] [int] NOT NULL,
    [PricingUnitType] [int] NOT NULL,
    CONSTRAINT [PK_dbo.PricingUnit] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_PricingItemId] ON [dbo].[PricingUnit]([PricingItemId])
CREATE INDEX [IX_PricingTierId] ON [dbo].[PricingUnit]([PricingTierId])
CREATE TABLE [dbo].[PricingItem] (
    [Id] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [Description] [nvarchar](max),
    [OrderInGroup] [int],
    [PricingGroupId] [int],
    CONSTRAINT [PK_dbo.PricingItem] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_PricingGroupId] ON [dbo].[PricingItem]([PricingGroupId])
ALTER TABLE [dbo].[PricingGroup] ADD CONSTRAINT [FK_dbo.PricingGroup_dbo.Pricing_PricingId] FOREIGN KEY ([PricingId]) REFERENCES [dbo].[Pricing] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[PricingTier] ADD CONSTRAINT [FK_dbo.PricingTier_dbo.Pricing_PricingId] FOREIGN KEY ([PricingId]) REFERENCES [dbo].[Pricing] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[PricingUnit] ADD CONSTRAINT [FK_dbo.PricingUnit_dbo.PricingItem_PricingItemId] FOREIGN KEY ([PricingItemId]) REFERENCES [dbo].[PricingItem] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[PricingUnit] ADD CONSTRAINT [FK_dbo.PricingUnit_dbo.PricingTier_PricingTierId] FOREIGN KEY ([PricingTierId]) REFERENCES [dbo].[PricingTier] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[PricingItem] ADD CONSTRAINT [FK_dbo.PricingItem_dbo.PricingGroup_PricingGroupId] FOREIGN KEY ([PricingGroupId]) REFERENCES [dbo].[PricingGroup] ([Id])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201711151456317_Initial', N'QPricingManager.Core.DAL.AppDbContext',  0x1F8B0800000000000400ED5C5F6FE336127F3FE0BE83A0A7DE21B593EC4B2FB05B649D4D61DC66B35D678BBE05B4C43842254A27528183A29FEC1EEE23DD5728A97F2645522265F94FB2C1028B84E20C87C3DF0C67C861FEFFDFFF4D7E5A47A1F304531CC468EA9E8D4E5D07222FF603B49ABA1979F8FE07F7A71FFFFEB7C9073F5A3BBF56FDDEB17E9412E1A9FB484872311E63EF1146008FA2C04B631C3F9091174763E0C7E3F3D3D37F8DCFCEC690B270292FC7997CC910092298FF427F9DC5C88309C9407813FB30C4653BFDB2C8B93A9F400471023C38757FF99C061E95EE0620B082E96816A7707475F9D1752EC300507916307C701D80504C00A1D25E7CC57041D218AD16096D00E1DD730269BF07106258CEE262D3DD7442A7E76C42E30D61C5CACB3089234B8667EF4A0D8D9BE4BDF4ECD61AA43AFC40754D9ED9AC733D4EDD52833FA77196B84E73C08B5998B2CE1A55E7DC0288473C971347D5F7A4060CC515FB77E2CCB29064299C229891148427CEE76C1906DEBFE1F35DFC3B44539485212F3C159F7E131A68D3E7344E604A9EBFC087724A73DF75C622DDB84958937134C544E788BC3B779D4F7470B00C618D0D4E290B4227F43344300504FA9F012130458C07CCB52B8DDE188BFD5F8D46C14815E53A3760FD11A215799CBAF447D7B90ED6D0AF5A4A09BEA2801A2325226906BB06B982D84B83A440CD8EC7BA4D7D98CE51B9EA0D45B6939634DDEA6FB0F9049E8255BE1A6A86AEF30586F977FC18248523A8507ACFA315D3F9A771F4250E37C46287FB3B90AE20A102C66DBD1671967AF682CE098C709BB4ACC3BD68A592C0521F9DCC724795D893F1C64D98388FADFDC69BCB78F52EA3CB0E2A631CCE6C2B64B79B6D652896E2DE05149A6DD2B20EF7B57D48B2F29F75C62AF419C24E19C3AD6D953179B3D7576FAF0AD843CB3DDA264AB0E47588B0C1C6A235BE4769F59622D26523AD9E8775B8172C5E92B5D945E781A47E437821C6746B2FC498BC79211BA3BD8AE9A43B0DEB86AA2A48C21C363674733C475E98F9B09EDEFB982209206BD3BE836BB217775686C3D63E441F100CC48A619BB1A9B5D030EEE2DBB6AE8ECDDD34EF287D4E6BDE91F731C93B8A8E3DD3A5C2A10DEBFC34CE5AEB24B7717E85D6B7747E8CC99BF3FBD642B0327E2ACF00ECCF5872426905FAA469C31F57684C507FAE3174D0D4CFDB19882DBA4533D79145EAA8A970FC737C1D82D5E6D07A80488A751FD6A1506853B486CFCC7772701357ED06464B980AFBFEAF20CCE82FA7D20A0B7D678FD0FBFD7DBCAEFB9FC9AA2D94C8375E621C7B41AE2351B78D930571E00FC8778C8E19A4BD9AFA80329AF2E83233219B5EF5165DC11012E85C7AC5EDC00C600FF8B22BA0F3F1EDC4AA376249ACD22A45D9FE290D493D3D4C99AB05E18C5A0C5DEA0011795B089017242034515183D8705761B3AF87697EB98209446C4330D185C9F85C62298B518FD6589C2E554DC61CF48C1029E49A1D0BAF4E3CA5652FA2A1AE556FE7AE07D54EB1BE0D1455F2EF0F88AAB57941309437F30EB4B4ECEC12648A50D81A902D771D66AEEE74343A1BD4DB6925DA1FCEB47AB7005B1D1F1E0BE28A38CC020E8DA0CC0871BBDD945B1264656ABFDB6D59ABABC3005550888D572C4F6D0E8953E99CA10308FA43879E38E81E418F34552870341BB66E1EFBC3A86EAD2C205A9D06EE01A24512496908A5A833A4CB24B95AB2C63CAB9252C4AF189659222E0F1F9AE8624C1790A82F693789AB72BF95A0AA64D6C2C79445790BAB6353E0DC8C5599F4EB58154669C6AA2CE9D0B12A76A1062B6E71257ECD8B6FAE6FEB0D79137BA6996C3D2D7EA924249B26A032B76A1E4D3722EAC05C3FE2C59C563BFA9CCA38AB92E75222B05B3BCA3CCA40D3FDD5A23889D3EAA623D0B70BF5E5599516D1AD257D70BF7B18298E008DF4A50853ED02D581F425C69732D3724E43A94BBE69D16AAB3D58B20A970CA7651520195A758BAAAAA3DC7A17AEBF4DC645D572D930196BCA9B2737204998FD6F28CB166751D43ACFBE5FD897FF46058FB1871555C0B5B4F548244EC10A36BED2A1A9A4D7418AC915206009D8A1F3CC8FA46E42CCA1D929ABA1546185BC82D5065A51B19F0B4A5DE5F7A8CD896D947A4DE719B1C02FBF64D2F81699DC6145E82004A9E25E6B16875984F471A89EBAB8A9E2E98B16730EC23514CF48F860CEAF59AAC3B36C7E33E7CA1D6AF10C5BCEBA98C134564C0AA8259448C989083D1B600E8BC9FE707CFD483CEC3A17FE7EC8B5566D73E6EBADA67E6D6BDEE627A0EC23AC647AF360EDC1697F64E799706F64ABA97783EC2170C4D7C3F18CF876736E7C959C302FAEDD9C5B7163CEF3295AECF15C1EA8AA30AD396BEDE4599D802978EA0EC73A796E6A20145C371F8FCD068B6C6E481BCC8F907ADBA09AFA5BD95DC4322AC5BEA03CC46CE3C8E70C1AC86BEFD6768C4D29316D76A947AF13D446223A2993C2EEC7B852965874711DAAAEA7C06719E2E21953EC8D5887D1E23FE18CFA4F44361D28DC830788495147E49E9F9E9D375EF21ECFABDA31C67EA848AA754F6BC535DB438565C034DB59436959A1CC1755A227907A8F20FD2E02EB7FF09C7A164E6EC54FFDB824D7811D232E96E37848172873E4C3F5D4FD23A7BA70E6BFDDD784274E2ECC8573EAFCD9A160EB87966F281A1045BD9ECFBDADC04EEDB80CD095E6BBC52BB33E9C8EDA13C879D48BC5A2B0E40F610CAC7DB6FC68A9171BF90DD332B0870DFF7E696B53E032B07E18CC892D70A815437CDF642946413C8418CDB751DD86DDEB85CEEBB0ACA3F5F2AAA72CFD63B5C6C3164B6C96D43A709A870D033D2F38FC4B026159F6FC72608F655EBA2BC2A3ADC6B67914707814DD71DBB1FD3B84178221CD35CFD142C8BAA0DFCE17284BEB95452BFD1F046C830C73931FAEDAF9DB28C13F8E72FBA24AF350A5F57B2E517EED25F3361BC86B8595F1FE7218581DBCCC5DAE4C6B2EA5BE8EBDB38CBDB8BF98BAFE32A6AB5FA403620FB37AF0B63AF796316C8AE0BB6AE05B86B12D92EFAA916F19CAB688BEAB86BE65A8E329B257D5979A94AB0A18956B138FBB7ABEEFA4792C4B05512FA532DE6EE5F41195E6E6FE2515BC9B4E42BFEB6A4A885E4619BB0D9C77A8028BF274F9B69FEED9DC1FE8A691030E561B16ECCF7523E809BB75DD678E1EE22A7668485475699EE443027CBA955FA62478001EA19F3D8871EE3DCA3FF5F1215A427F8E6E339264844E1946CB50F863402CF8681B3FAFC117659EDCE6679B7888295031033A05788BDE6741E8D7725F2B8EA6352C5854531E03B3B524EC3878F55C73FA14234346A5FAEA60EC0E46494899E15BB4004FB08F6C5F31FC0857C07BAE8A36F44CBA174254FBE42A00AB1444B8E4B1A1A7BF520CFBD1FAC7BF00587126CFA75E0000 , N'6.2.0-61023')

